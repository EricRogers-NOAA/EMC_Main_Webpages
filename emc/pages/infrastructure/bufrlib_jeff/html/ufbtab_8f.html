<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NCEPLIBS-bufr: ufbtab.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-bufr
   &#160;<span id="projectnumber">11.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ufbtab_8f.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">ufbtab.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="ufbtab_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a4fb9c0d69c11bdc6e218f81de3dc6025"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ufbtab_8f.html#a4fb9c0d69c11bdc6e218f81de3dc6025">ufbtab</a> (LUNIN, TAB, I1, I2, IRET, STR)</td></tr>
<tr class="memdesc:a4fb9c0d69c11bdc6e218f81de3dc6025"><td class="mdescLeft">&#160;</td><td class="mdescRight">THIS SUBROUTINE EITHER OPENS A BUFR FILE CONNECTED TO ABS(LUNIN) FOR INPUT OPERATIONS (IF IT IS NOT ALREADY OPENED AS SUCH), OR SAVES ITS POSITION AND REWINDS IT TO THE FIRST DATA MESSAGE (IF BUFR FILE ALREADY OPENED), THE EXTENT OF ITS PROCESSING IS DETERMINED BY THE SIGN OF LUNIN.  <a href="#a4fb9c0d69c11bdc6e218f81de3dc6025">More...</a><br/></td></tr>
<tr class="separator:a4fb9c0d69c11bdc6e218f81de3dc6025"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>WOOLLEN </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-01-06 </dd></dl>

<p>Definition in file <a class="el" href="ufbtab_8f_source.html">ufbtab.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="a4fb9c0d69c11bdc6e218f81de3dc6025"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine ufbtab </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>LUNIN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real*8, dimension(i1,i2)&#160;</td>
          <td class="paramname"><em>TAB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>I1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>I2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>IRET</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character*(*)&#160;</td>
          <td class="paramname"><em>STR</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>THIS SUBROUTINE EITHER OPENS A BUFR FILE CONNECTED TO ABS(LUNIN) FOR INPUT OPERATIONS (IF IT IS NOT ALREADY OPENED AS SUCH), OR SAVES ITS POSITION AND REWINDS IT TO THE FIRST DATA MESSAGE (IF BUFR FILE ALREADY OPENED), THE EXTENT OF ITS PROCESSING IS DETERMINED BY THE SIGN OF LUNIN. </p>
<p>IF LUNIN IS GREATER THAN ZERO, THIS SUBROUTINE READS SPECIFIED VALUES FROM ALL DATA SUBSETS IN THE BUFR FILE INTO INTERNAL ARRAYS AND RETURNS THESE VALUES ALONG WITH A COUNT OF THE SUBSETS. IF LUNIN IS LESS THAN ZERO, THIS SUBROUTINE RETURNS THE BUFR ARCHIVE LIBRARY'S GLOBAL VALUE FOR MISSING (REGARDLESS OF THE MNEMONICS SPECIFIED IN STR) ALONG WITH A COUNT OF THE SUBSETS (SEE REMARKS 2). FINALLY, THIS SUBROUTINE EITHER CLOSES THE BUFR FILE IN ABS(LUNIN) (IF IT WAS OPENED HERE) OR RESTORES IT TO ITS PREVIOUS READ/WRITE STATUS AND POSITION (IF IT WAS NOT OPENED HERE). WHEN LUNIN IS GREATER THAN ZERO, THE DATA VALUES CORRESPOND TO MNEMONICS, NORMALLY WHERE THERE IS NO REPLICATION (THERE CAN BE REGULAR OR DELAYED REPLICATION, BUT THIS SUBROUTINE WILL ONLY READ THE FIRST OCCURRENCE OF THE MNEMONIC IN EACH SUBSET). UFBTAB PROVIDES A MECHANISM WHEREBY A USER CAN EITHER DO A QUICK SCAN OF THE RANGE OF VALUES CORRESPONDING TO ONE OR MORE MNEMNONICS AMONGST ALL DATA SUBSETS FOR AN ENTIRE BUFR FILE (WHEN LUNIN IS GREATER THAN ZERO), OR SIMPLY OBTAIN A COUNT OF SUBSETS IN THE BUFR FILE (WHEN LUNIN IS LESS THAN ZERO); NO OTHER BUFR ARCHIVE LIBRARY ROUTINES HAVE TO BE CALLED. THIS SUBROUTINE IS SIMILAR TO BUFR ARCHIVE LIBRARY SUBROUTINE UFBTAM EXCEPT UFBTAM READS SUBSETS FROM MESSAGES STORED IN INTERNAL MEMORY AND IT HAS NO OPTION FOR RETURNING ONLY A COUNT OF THE SUBSETS. IN ADDITION, UFBTAM CURRENTLY CANNOT READ DATA FROM COMPRESSED BUFR MESSAGES. UFBTAB CAN READ DATA FROM BOTH UNCOMPRESSED AND COMPRESSED BUFR MESSAGES.</p>
<p>PROGRAM HISTORY LOG: 1994-01-06 J. WOOLLEN &ndash; ORIGINAL AUTHOR 1998-07-08 J. WOOLLEN &ndash; IMPROVED MACHINE PORTABILITY 1998-10-27 J. WOOLLEN &ndash; MODIFIED TO CORRECT PROBLEMS CAUSED BY IN- LINING CODE WITH FPP DIRECTIVES 1999-11-18 J. WOOLLEN &ndash; THE NUMBER OF BUFR FILES WHICH CAN BE OPENED AT ONE TIME INCREASED FROM 10 TO 32 (NECESSARY IN ORDER TO PROCESS MULTIPLE BUFR FILES UNDER THE MPI) 2000-09-19 J. WOOLLEN &ndash; MAXIMUM MESSAGE LENGTH INCREASED FROM 10,000 TO 20,000 BYTES 2002-05-14 J. WOOLLEN &ndash; REMOVED OLD CRAY COMPILER DIRECTIVES 2003-11-04 S. BENDER &ndash; ADDED REMARKS/BUFRLIB ROUTINE INTERDEPENDENCIES 2003-11-04 D. KEYSER &ndash; MODIFIED TO NOT ABORT WHEN THERE ARE TOO MANY SUBSETS COMING IN (I.E., .GT. "I2"), BUT RATHER JUST PROCESS "I2" REPORTS AND PRINT A DIAGNOSTIC; MAXJL (MAXIMUM NUMBER OF JUMP/LINK ENTRIES) INCREASED FROM 15000 TO 16000 (WAS IN VERIFICATION VERSION); MODIFIED TO CALL ROUTINE REWNBF WHEN THE BUFR FILE IS ALREADY OPENED, ALLOWS SPECIFIC SUBSET INFORMATION TO BE READ FROM A FILE IN THE MIDST OF ITS BEING READ FROM OR WRITTEN TO), BEFORE OPENBF WAS ALWAYS CALLED AND THIS WOULD HAVE LED TO AN ABORT OF THE APPLICATION PROGRAM (WAS IN VERIFICATION VERSION); UNIFIED/PORTABLE FOR WRF; ADDED DOCUMENTATION (INCLUDING HISTORY) 2004-08-09 J. ATOR &ndash; MAXIMUM MESSAGE LENGTH INCREASED FROM 20,000 TO 50,000 BYTES 2005-09-16 J. WOOLLEN &ndash; WORKS FOR COMPRESSED BUFR MESSAGES; ADDED OPTION TO RETURN ONLY SUBSET COUNT (WHEN INPUT UNIT NUMBER IS LESS THAN ZERO) 2006-04-14 J. ATOR &ndash; ADD DECLARATION FOR CREF 2007-01-19 J. ATOR &ndash; REPLACED CALL TO PARSEQ WITH CALL TO PARSTR 2009-04-21 J. ATOR &ndash; USE ERRWRT 2009-12-01 J. ATOR &ndash; FIX BUG FOR COMPRESSED CHARACTER STRINGS WHICH ARE IDENTICAL ACROSS ALL SUBSETS IN A SINGLE MESSAGE 2010-05-07 J. ATOR &ndash; WHEN CALLING IREADMG, TREAT READ ERROR AS END-OF-FILE CONDITION 2012-03-02 J. ATOR &ndash; USE FUNCTION UPS 2012-09-15 J. WOOLLEN &ndash; MODIFIED FOR C/I/O/BUFR INTERFACE; USE NEW OPENBF TYPE 'INX' TO OPEN AND CLOSE THE C FILE WITHOUT CLOSING THE FORTRAN FILE 2014-11-20 J. ATOR &ndash; ENSURE OPENBF HAS BEEN CALLED AT LEAST ONCE BEFORE CALLING STATUS 2014-12-10 J. ATOR &ndash; USE MODULES INSTEAD OF COMMON BLOCKS 2016-12-19 J. WOOLLEN &ndash; FIX BUG TO PREVENT INVENTORY OVERFLOW</p>
<p>USAGE: CALL UFBTAB (LUNIN, TAB, I1, I2, IRET, STR) INPUT ARGUMENT LIST: LUNIN - INTEGER: ABSOLUTE VALUE IS FORTRAN LOGICAL UNIT NUMBER FOR BUFR FILE I1 - INTEGER:</p>
<ul>
<li>IF LUNIN IS GREATER THAN ZERO: LENGTH OF FIRST DIMENSION OF TAB (MUST BE AT LEAST AS LARGE AS THE NUMBER OF BLANK-SEPARATED MNEMONICS IN STR)</li>
<li>IF LUNIN IS LESS THAN ZERO: LENGTH OF FIRST DIMENSION OF TAB (RECOMMEND PASSING IN WITH VALUE OF 1 - SEE REMARKS 2) I2 - INTEGER: LENGTH OF SECOND DIMENSION OF TAB</li>
<li>IF LUNIN IS GREATER THAN ZERO: MUST BE AT LEAST AS LARGE AS VALUE RETURNED IN IRET, OTHERWISE ONLY FIRST I2 SUBSETS ARE RETURNED IN TAB</li>
<li>IF LUNIN IS LESS THAN ZERO: RECOMMEND PASSING IN WITH VALUE OF 1 - SEE REMARKS 2 STR - CHARACTER*(*):</li>
<li>IF LUNIN IS GREATER THAN ZERO: STRING OF BLANK- SEPARATED TABLE B MNEMONICS IN ONE-TO-ONE CORRESPONDENCE WITH FIRST DIMENSION OF TAB, I1 (THE NUMBER OF MNEMONICS IN THE STRING MUST BE NO LARGER THAN I1)<ul>
<li>THERE ARE THREE "GENERIC" MNEMONICS NOT RELATED TO TABLE B, THESE RETURN THE FOLLOWING INFORMATION IN CORRESPONDING TAB LOCATION: 'NUL' WHICH ALWAYS RETURNS BMISS ("MISSING") 'IREC' WHICH ALWAYS RETURNS THE CURRENT BUFR MESSAGE (RECORD) NUMBER IN WHICH THIS SUBSET RESIDES 'ISUB' WHICH ALWAYS RETURNS THE CURRENT SUBSET NUMBER OF THIS SUBSET WITHIN THE BUFR MESSAGE (RECORD) NUMBER 'IREC'</li>
</ul>
</li>
<li>IF LUNIN IS LESS THAN ZERO: DUMMY {RECOMMEND PASSING IN STRING AS A 1-CHARACTER BLANK (i.e., ' ') - SEE REMARKS 2}</li>
</ul>
<p>OUTPUT ARGUMENT LIST: TAB - REAL*8: (I1,I2):</p>
<ul>
<li>IF LUNIN IS GREATER THAN ZERO: STARTING ADDRESS OF DATA VALUES READ FROM BUFR FILE</li>
<li>IF LUNIN IS LESS THAN ZERO: STARTING ADDRESS OF ARRAY OF VALUES ALL RETURNED WITH THE BUFRLIB'S GLOBAL VALUE FOR MISSING (BMISS) IRET - INTEGER: NUMBER OF DATA SUBSETS IN BUFR FILE</li>
<li>IF LUNIN IS GREATER THAN ZERO: MUST BE NO LARGER THAN I2, OTHERWISE ONLY FIRST I2 SUBSETS ARE RETURNED IN TAB</li>
</ul>
<p>REMARKS: 1) NOTE THAT UFBMEM CAN BE CALLED PRIOR TO THIS TO STORE THE BUFR MESSAGES INTO INTERNAL MEMORY.</p>
<p>2) BELOW ARE TWO EXAMPLES WHERE THE USER CALLS UFBTAB WITH LUNIN LESS THAN ZERO SO AS TO ONLY OBTAIN A COUNT OF SUBSETS IN A BUFR FILE (ALONG WITH THE BUFRLIB'S GLOBAL VALUE FOR "MISSING").</p>
<p>EXAMPLE 1) I1 AND I2 ARE SET TO 1 SUCH THAT TAB IS A SCALAR AND STR IS SET TO A 1-CHARACTER BLANK. THESE ARE THE RECOMMENDED VALUES FOR I1, I2 AND STR SINCE THEY USE THE LEAST AMOUNT OF MEMORY):</p>
<p>REAL(8) TAB .... .... CALL UFBTAB(-LUNIN,TAB,1,1,IRET,' ') .... ....</p>
<p>HERE IRET WILL RETURN THE COUNT OF SUBSETS IN THE BUFR FILE AND TAB WILL RETURN THE BUFRLIB'S GLOBAL VALUE FOR "MISSING" (BMISS).</p>
<p>EXAMPLE 2) I1 IS SET TO 4 AND I2 IS SET TO 8 SUCH THAT TAB IS A 32-WORD ARRAY, AND STR IS SET TO A NONSENSICAL STRING. THESE VALUES FOR I1, I2 AND STR WASTE MEMORY BUT GIVE THE SAME ANSWERS FOR TAB AND IRET AS IN EXAMPLE 1 (FOR THE SAME INPUT BUFR FILE!):</p>
<p>REAL(8) TAB(4,8) .... .... CALL UFBTAB(-LUNIN,TAB,4,8,IRET,'BUFR IS A WONDERFUL FMT') .... ....</p>
<p>HERE IRET WILL AGAIN RETURN THE COUNT OF SUBSETS IN THE BUFR FILE AND ALL 32 VALUES OF ARRAY TAB WILL RETURN THE BUFRLIB'S GLOBAL VALUE FOR "MISSING" (BMISS).</p>
<p>THE SIXTH ARGUMENT STR IS A DUMMY VALUE AND CAN BE SET TO ANY CHARACTER STRING (AGAIN, A 1-CHARACTER BLANK ' ' IS RECOMMENDED). THE THIRD ARGUMENT I1 HAS NO RELATIONSHIP WITH THE NUMBER OF BLANK-SEPARATED MNEMONICS IN STR AND CAN BE SET TO ANY INTEGER VALUE (AGAIN, 1 IS RECOMMENDED). THE FOURTH ARGUMENT I2 HAS NO RELATIONSHIP WITH THE NUMBER OF DATA SUBSETS IN THE BUFR FILE RETURNED IN IRET (AGAIN, 1 IS RECOMMENDED).</p>
<p>..................................................................... </p>
<pre class="fragment">THIS ROUTINE CALLS:        BORT     CLOSBF   ERRWRT   IREADMG
                           IREADSB  MESGBC   NMSUB    OPENBF
                           PARSTR   REWNBF   STATUS   STRING
                           UPB      UPBB     UPC      UPS
                           USRTPL
THIS ROUTINE IS CALLED BY: None
                           Normally called only by application
                           programs.</pre> 
<p>Definition at line <a class="el" href="ufbtab_8f_source.html#l00197">197</a> of file <a class="el" href="ufbtab_8f_source.html">ufbtab.f</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_30c37837910170b6dae887e9df3b66a9.html">nceplibs-bufr</a></li><li class="navelem"><a class="el" href="dir_e81fc8df062d10d5f2b231f7e4ab81b8.html">src</a></li><li class="navelem"><a class="el" href="ufbtab_8f.html">ufbtab.f</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
