<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NCEPLIBS-bufr: closmg.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-bufr
   &#160;<span id="projectnumber">11.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('closmg_8f.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">closmg.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Close and write the current message to a BUFR file that was previously opened for writing.  
<a href="#details">More...</a></p>

<p><a href="closmg_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a3378111de0136710daec2ded25ed34e4"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="closmg_8f.html#a3378111de0136710daec2ded25ed34e4">closmg</a> (LUNIN)</td></tr>
<tr class="memdesc:a3378111de0136710daec2ded25ed34e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine closes the BUFR message that is currently open for writing within internal arrays associated with logical unit ABS(LUNIN), and it then writes the message to that logical unit.  <a href="#a3378111de0136710daec2ded25ed34e4">More...</a><br/></td></tr>
<tr class="separator:a3378111de0136710daec2ded25ed34e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Close and write the current message to a BUFR file that was previously opened for writing. </p>

<p>Definition in file <a class="el" href="closmg_8f_source.html">closmg.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="a3378111de0136710daec2ded25ed34e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine closmg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>LUNIN</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine closes the BUFR message that is currently open for writing within internal arrays associated with logical unit ABS(LUNIN), and it then writes the message to that logical unit. </p>
<dl class="section author"><dt>Authors</dt><dd>J. Woollen </dd>
<dd>
D. Keyser </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-01-06</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUNIN</td><td>- integer: absolute value is Fortran logical unit number for BUFR file</td></tr>
  </table>
  </dd>
</dl>
<p>Logical unit ABS(LUNIN) should have already been opened for output operations via a previous call to subroutine <a class="el" href="openbf_8F.html#a9bea9aeada166bd9037b959ca8452b28" title="This subroutine identifies a new file to the BUFRLIB software for input or output operations...">openbf()</a>.</p>
<p>If LUNIN &lt; 0, then any message containing zero data subsets will not be written to logical unit ABS(LUNIN) for the remainder of the life of the application program. This includes suppressing the writing of any dummy messages containing dump center and initiation times that normally appear in the first 2 messages of NCEP dump files.</p>
<p><b>Program history log:</b></p>
<ul>
<li>1994-01-06 J. Woollen &ndash; Original author</li>
<li>1998-07-08 J. Woollen &ndash; Replaced call to Cray library routine "ABORT" with call to new internal BUFRLIB routine "BORT"; modified to make Y2K compliant</li>
<li>1999-11-18 J. Woollen &ndash; The number of BUFR files which can be opened at one time increased from 10 to 32 (necessary in order to process multiple BUFR files under the MPI)</li>
<li>2000-09-19 J. Woollen &ndash; Maximum message length increased from 10,000 to 20,000 bytes</li>
<li>2003-05-19 J. Woollen &ndash; Corrected a bug which prevented the dump center and initiatiion time messages from being written out</li>
<li>2003-11-04 J. Ator &ndash; Added documentation</li>
<li>2003-11-04 S. Bender &ndash; Added remarks and routine interdependencies</li>
<li>2003-11-04 D. Keyser &ndash; Unified/portable for WRF; added history documentation; outputs more complete diagnostic info when routine terminates abnormally</li>
<li>2004-08-09 J. Ator &ndash; Maximum message length increased from 20,000 to 50,000 bytes</li>
<li>2005-05-26 D. Keyser &ndash; Add LUNIN &lt; 0 option to suppress writing of all future zero-subset messsages to ABS(LUNIN)</li>
<li>2014-12-10 J. Ator &ndash; Use modules instead of COMMON blocks</li>
</ul>
<p><b>This routine calls:</b> <a class="el" href="bort_8f.html#a488d3a8cf930fb592a9fdaefcfa04ac4" title="THIS SUBROUTINE WRITES (VIA BUFR ARCHIVE LIBRARY SUBROUTINE ERRWRT) A GIVEN ERROR STRING AND THEN CAL...">bort()</a> <a class="el" href="msgwrt_8f.html#ac95ecf1436ba14805a33efd29fab1e5d" title="THIS SUBROUTINE PERFORMS SOME FINAL CHECKS ON AN OUTPUT BUFR MESSAGE (E.G., CONFIRMING THAT EACH SECT...">msgwrt()</a> <a class="el" href="status_8f.html#a22292e7a69c411a961168198d259f336" title="THIS SUBROUTINE CHECKS WHETHER LOGICAL UNIT NUMBER LUNIT (AND ITS ASSOCIATED BUFR FILE) IS CURRENTLY ...">status()</a> <a class="el" href="wrcmps_8f.html#a8b333832f77606059ec94ba8b80d4e8d" title="THIS SUBROUTINE PACKS UP THE CURRENT SUBSET WITHIN MEMORY (ARRAY IBAY IN MODULE BITBUF), STORING IT FOR COMPRESSION. ">wrcmps()</a> <a class="el" href="wtstat_8f.html#a82676f83ff365e03ad827ed5ba0af1ae" title="THIS SUBROUTINE EITHER DISCONNECTS THE INPUT LOGICAL UNIT NUMBER LUNIT (AND ITS ASSOCIATED BUFR FILE)...">wtstat()</a></p>
<p><b>This routine is called by:</b> <a class="el" href="closbf_8F.html#a00c94986037d2cf27d04de7a1f8a3ebc" title="This subroutine closes the connection between logical unit LUNIT and the BUFRLIB software. ">closbf()</a> <a class="el" href="makestab_8f.html#ad12d047119fdcdeb97ffbced0696b9fb" title="THIS SUBROUTINE CONSTRUCTS AN INTERNAL JUMP/LINK TABLE WITHIN MODULE TABLES, USING THE INFORMATION WI...">makestab()</a> <a class="el" href="openmb_8f.html#a4fc37a744b3f3c266a6f73acc117710a" title="This subroutine opens and initializes a new BUFR message within internal arrays, for eventual output ...">openmb()</a> <a class="el" href="openmg_8f.html#ab4daa2db1ea9729121b061486af173be" title="This subroutine opens and initializes a new BUFR message within internal arrays, for eventual output ...">openmg()</a> <a class="el" href="writsa_8f.html#a50e3c630fd99f545e2427fe9b18c4d48" title="THIS SUBROUTINE SHOULD ONLY BE CALLED WHEN LOGICAL UNIT ABS(LUNXX) HAS BEEN OPENED FOR OUTPUT OPERATI...">writsa()</a> <br/>
Also called by application programs. </p>

<p>Definition at line <a class="el" href="closmg_8f_source.html#l00060">60</a> of file <a class="el" href="closmg_8f_source.html">closmg.f</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_30c37837910170b6dae887e9df3b66a9.html">nceplibs-bufr</a></li><li class="navelem"><a class="el" href="dir_e81fc8df062d10d5f2b231f7e4ab81b8.html">src</a></li><li class="navelem"><a class="el" href="closmg_8f.html">closmg.f</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
